function humanFileSize(a){var b=1e3;if(Math.abs(a)<b)return a+" B";var c=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=-1;do a/=b,++d;while(Math.abs(a)>=b&&d<c.length-1);return a.toFixed(0)+" "+c[d]}function enableNextImage(a,b){jQuery("#upload"+b).removeAttr("disabled")}function confirmBeforeDeleteAd(){return confirm(cpSettings.delete_item)}jQuery(function(a){"undefined"!=typeof a.fn.appAddressAutocomplete&&a(".app-address-field").appAddressAutocomplete(),a(".home-cover .listing-map").prependTo(a(".home-cover"))}),jQuery(function(a){if("undefined"!=typeof a.fn.appthemes_map){var b={},c=[],d=[];a(".listing-map-data").each(function(){var b=a(this).data("id"),e=a(this).data("lat"),f=a(this).data("lng"),g=a(this).data("title"),h=a(this).data("image"),i=a(this).data("address"),j=a(this).data("permalink");if(0==e||0==f||d.indexOf(b)!==-1)return!0;if("undefined"==typeof e||"undefined"==typeof f)return!0;var k='<div class="info-window-wrap"><a href="'+j+'"><img src="'+h+'"><div class="info-window-body"><h3>'+g+'</h3><span class="info-window-address">'+i+"</span></div></a></div>",l={lat:e,lng:f,marker_text:g,popup_content:k};c.push(l),d.push(b)}),"undefined"!=typeof InfoBubble&&(a.appthemes.appthemes_map.prototype._create_marker_info=function(){return InfoBubble.prototype.getAnchorHeight_=function(){return 35},new InfoBubble({map:this.options.map,content:"",padding:15,borderColor:"#F3F3F4",borderRadius:4,minHeight:100,maxHeight:100,minWidth:250,maxWidth:250,shadowStyle:0,arrowPosition:50,disableAutoPan:!1,hideCloseButton:!0,backgroundClassName:"info-window-wrap"})}),"undefined"!=typeof MarkerClusterer&&a(document).on("appthemes_mapcreate",function(b){var c=a(b.target).data("appthemesAppthemes_map"),d={};new MarkerClusterer(c.options.map,c.markers,d),c.options.map.addListener("tilesloaded",function(){a("#map-loading").length&&a("#map-loading").hide()})}),c.length>0&&(b={center_lat:c[0].lat,center_lng:c[0].lng,zoom:17,auto_zoom:c.length>1,animation:!0,markers:c},a(".listing-map").appthemes_map(b))}}),jQuery(function(a){a(document).foundation(),a("[data-tabs]").each(function(){var b=a(this);if(b.data("deepLink")){var c=window.location.hash;c.length&&b.find('[href="'+c+'"]').length&&(b.foundation("selectTab",c),b.data("deepLinkSmudge")&&a(window).load(function(){var c=b.offset();a("html, body").animate({scrollTop:c.top},b.data("deepLinkSmudgeDelay"))}))}})}),jQuery(function(a){"use strict";function b(){var b=a("#listing-carousel");null!==b&&(b.slick({fade:!0,dots:!0,rtl:"rtl"===a("html").attr("dir")}),a(".listing-photo-grid a").click(function(c){c.preventDefault(),a("#listingPhotosModal").foundation("open"),b.slick("setPosition",0),b.slick("slickGoTo",parseInt(a(this).data("index")))}))}function c(a){var b=a.imagesLoaded(function(){b.masonry({itemSelector:".parent-cat-wrap"})})}function d(){a("#catlvl0").attr("level",0),a(document).on("change","#ad_cat_id",function(){var b=parseInt(a(this).parent().attr("level"),10);e(a(this),"catlvl",b+1,cpSettings.ad_parent_posting),a.each(a(this).parent().parent().children(),function(c,d){b+1<c&&a(d).remove(),b+1===c&&a(d).removeClass("hasChild")}),a(this).val()>0?a("#chosenCategory input:first").val(a(this).val()):a("#catlvl"+(b-1)+" select").val()>0?a("#chosenCategory input:first").val(a("#catlvl"+(b-1)+" select").val()):a("#chosenCategory input:first").val("-1")})}function e(b,c,d,e){var f=a(b).parent(),g=a(b).val(),h=c+d;a(f).hasClass("hasChild")||a(f).addClass("hasChild").parent().append('<div id="'+h+'" level="'+d+'" class="childCategory"></div>'),a.ajax({type:"POST",url:cpSettings.ajax_url,dataType:"json",data:{action:"dropdown-child-categories",cat_id:g,listing_id:cpSettings.listing_id,level:d},beforeSend:function(){a("#getcat").hide(),a(b).addClass("ui-autocomplete-loading").slideDown("fast")},complete:function(){a(b).removeClass("ui-autocomplete-loading")},error:function(a,b,c){},success:function(f){var g;f.success===!0?(a("#"+h).html(f.html).slideDown("fast"),a("#"+h+" select").val()&&a("#"+h+" select").trigger("change"),g=1!==d):(a("#"+h).slideUp("fast"),g=a(b).val()!==-1||2!==d),"yes"===e&&a("#chosenCategory input:first").val()>0?a("#getcat").fadeIn():g&&"whenEmpty"===e&&a("#chosenCategory input:first").val()>0?a("#getcat").fadeIn():a("#"+c+(d-1)).hasClass("childCategory")&&a(b).val()>-1&&"no"===e?a("#getcat").fadeIn():a("#getcat").fadeOut()}})}if(a(document).on("wp-custom-header-video-loaded",function(){a("body").addClass("has-header-video")}),"undefined"!=typeof typedStrings&&a(".home-cover .element").typed({strings:typedStrings,typeSpeed:0,startDelay:200,backSpeed:0,backDelay:2500,loop:!0,loopCount:3}),a("#memberships tr").click(function(){a(this).find("input[type=radio]").prop("checked",!0)}),a("#listing-layout button").click(function(){a(this).hasClass("list")?(a(this).toggleClass("disabled").toggleClass("hollow"),a(".listing-wrap").removeClass("medium-up-3").addClass("medium-up-12 list-view"),a("#grid_view").removeClass("disabled hollow")):a(this).hasClass("grid")&&(a(this).toggleClass("disabled").toggleClass("hollow"),a(".listing-wrap").removeClass("medium-up-12 list-view").addClass("medium-up-3"),a("#list_view").removeClass("disabled hollow"))}),a(document).on("click","a.fave-button",function(b){b.preventDefault();var c=a(this),d={action:"classipress_favorites",id:c.attr("data-id"),type:c.attr("data-type"),nonce:c.attr("data-nonce")};return a.ajax({type:"post",dataType:"json",context:c,data:d,url:AppThemes.ajaxurl,beforeSend:function(){c.addClass("fave-clicked"),c.fadeTo("fast",.5),c.removeAttr("href")}}).done(function(b){c.removeClass("fave-clicked"),c.fadeTo("fast",1),b.success?(c.attr("data-type",b.data.type),a(".fave-text",c).text(b.data.text),a("i",c).attr("class",b.data.icon),a("i",c).attr("title",b.data.text)):alert(b.data)}),!1}),a("form#app-contact-form").length){var f=a("form#app-contact-form"),g=a("#app-contact-form-response"),h=a("#app-contact-form-wrap"),i=a("#app-contact-submit");f.length&&f.validate(),f.on("submit",function(b){if(b.preventDefault(),a(this).valid()){var c={action:"appthemes_contact_owner",id:a("#post_ID").val(),nonce:a("#_wpnonce").val(),name:a("#contact_name").val(),email:a("#contact_email").val(),message:a("#contact_message").val(),honeypot:a("#contact_username").val()};return a.ajax({type:"post",dataType:"json",data:c,url:AppThemes.ajaxurl,beforeSend:function(){g.html("").removeClass("notice error"),i.attr("disabled",!0),a("i.fa-spinner").css("display","inline-block"),h.css("opacity","0.5")}}).done(function(b){i.attr("disabled",!1),a("i.fa-spinner").css("display","none"),h.css("opacity","1"),b.success&&(h.css("display","none"),g.html(b.data).removeClass("error").addClass("notice success")),g.html(b.data).addClass("notice error")}),!1}})}b(),"undefined"!=typeof a.validator&&(a.validator.addMethod("app_images_upload",function(b,c){return a(c).parent().find("input.fileupload:filled").length||a(c).parent().data().appfilecount>0},a.validator.messages.required),a(".app-form").submit(function(a){"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave()}).validate({ignore:".ignore",errorPlacement:function(a,b){"checkbox"===b.attr("type")||"radio"===b.attr("type")?b.closest("ol").after(a):a.insertAfter(b)}}),a(".user-profile-edit").validate(),a("#commentform").validate()),a(".app-attachment-list").length>0&&(a(".app-attachment-list").sortable({refreshPositions:!0,handle:".thumbnail",scroll:!1,connectWith:".app-attachment-list",start:function(a,b){b.placeholder.height(b.item.height()),b.placeholder.css("visibility","visible")}}).disableSelection(),a(".app-attachment-list").on("click","[data-attachment-button]",function(){var b=a(this).data("attachment-button"),c=!a(this).hasClass("hollow"),d=a(this).closest(".media-object-section").find('[name="'+b+'"]');d.prop("checked",!c),a('[data-attachment-button="'+b+'"]').addClass("hollow"),a(this).toggleClass("hollow",c)})),a(".sticky-header .header .top-bar").length>0&&a(function(){a(".sticky-header .header .top-bar").wrapAll('<div data-sticky-container><div id="sticky_header" data-sticky></div></div>'),a("#sticky_header").parent().height(a("#sticky_header").height()),new Foundation.Sticky(a("#sticky_header"),{marginTop:0});var b={progress:function(){a("#sticky_header").parent().height(a("#sticky_header").height())}},c=a(".shrink_sticky_top_bar #first-top-bar, .shrink_sticky_title_bar #top-bar-primary, .shrink_sticky_nav_bar #top-bar-secondary");a("#sticky_header").on("sticky.zf.stuckto:top",function(){c.slideUp(b)}).on("sticky.zf.unstuckfrom:top",function(){c.slideDown(b)})}),a(".listing-cats-page").each(function(){c(a(this))}),a(document).on("show.zf.dropdownmenu",function(b,d){a(this).find(".menu.dropdown .listing-cats-dropdown").each(function(){c(a(this))})}),a("#search_keywords").on("keydown",function(b){b.keyCode===a.ui.keyCode.TAB&&a(this).autocomplete("instance").menu.active&&b.preventDefault()}).autocomplete({source:function(b,c){a.ajax({url:cpSettings.ajax_url,dataType:"json",data:{action:"ajax-tag-search-front",tax:cpSettings.appTaxTag,term:b.term},error:function(a,b,c){},success:function(d){var e=b.term.split(" ");e.pop(),e.push(""),e=e.join(" "),c(a.map(d,function(a){return{term:a,value:e+j(a.name)}}))}})},search:function(){var a=this.value.split(" ").pop();if(a.length<2)return!1},select:function(a,b){return this.value=b.item.value+" ",!1},minLength:2});var j=function(a){var b=document.createElement("div");b.innerHTML=a;var c=b.childNodes[0].nodeValue;return b.removeChild(b.firstChild),c},k=function(a){var b=cpSettings.currency_position,c=cpSettings.ad_currency;switch(b){case"left":return c+a;case"left_space":return c+" "+a;case"right":return a+c;default:return a+" "+c}};a(".refine-search-field-wrap .slider").on("moved.zf.slider",function(){a("#amount").val(k(a("#price_min").val())+" - "+k(a("#price_max").val()))}),a(".refine-categories-list-label").on("click",function(){return a(this).toggleClass("open").next(".refine-categories-list-wrap").animate({height:["toggle","swing"],opacity:"toggle"},200),!1}),a(".refine-categories-list-label").each(function(){var b=a(this).attr("for"),c=a('input[name="'+b+'[]"]');c.filter(":checked").length>0&&a(this).toggleClass("open").next(".refine-categories-list-wrap").show()}),a("#step1 .form_step").length>0&&d(),a("#ad_cat_id").val()>0&&a("#ad_cat_id").trigger("change"),a("[data-open-details]").click(function(b){a(this).find(".expand-icon").is(":visible")&&(a(this).next().toggleClass("is-active"),a(this).toggleClass("is-active"))})});